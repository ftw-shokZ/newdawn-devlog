---
layout: post
title: "üïäÔ∏è A New Dawn Beckons: Clanwar Scrolls ‚Äì Chapter II"
date: 2025-05-24
thumbnail: /newdawn-devlog/assets/thumbs/post-3.png
tags: [Clanwar, System, Scripting, Update]
---

> *‚ÄúTo map, or not to map‚Äîthat is no longer the question.‚Äù*  
> ‚Äî *Jonny, Lord of New Dawn*

Thus continues our tale ‚Äî deeper into the digital saga.  
From the foundations laid in v2.5, we now ascend with a reworked Clanwar core and powerful maploader logic.  
Let this post guide you through all that was reforged.

---

## ‚úÖ Clanwar System ‚Äì Core Overhaul

### üéØ Winner Logic Revamp
The `Winner(type)` function now handles:
- Victory assignment (based on last player standing)
- Score incrementation
- Floating TextDraw info updates (`SendRoundCountInformation()`)
- Round transition logic and auto `CallNextRound()` or `EndGame()`

### ‚öñÔ∏è Judgement of the Fallen ‚Äì `CheckTable`
Handles eliminated players and triggers victory detection when a team is wiped.
- Updates scoreboard with order of falling
- Calls `Winner()` function based on remaining teams

### üõ°Ô∏è Scoreboard Updates ‚Äì `SetScoreBoard`
New deathboard system using `TextDrawSetString()` and internal scoreboard buffer (`ScoreBoardString[]`).

### üîÑ Round Flow ‚Äì `CallNextRound()` & `SendToMap()`
- Resets player states, HUDs, and positions
- Loads the next map via `ChangeMap()`

### üé¨ Ending a Clanwar ‚Äì `EndGame()`
- Tallies final scores
- Triggers cleanup and result broadcast
- Resets `MapOnGoing`, `CanSpawn`, and team points

---

## üßô‚Äç‚ôÇÔ∏è The New Maploader ‚Äì `mapload.inc` Rewritten

### üåä Map Transitioning
- Uses `SendRconCommand()` to unload and load maps safely
- Destroys all objects and pickups
- Handles vehicle + 3D text label creation

### üó∫Ô∏è INI-Driven World Config
Maps now load from INI files:
- `Time`, `Weather`, `SpawnMode`, `Vehicle`, `Pickup` and more
- Full author and mapname display via HUD (`TextDrawSetString()`)

### üöò Vehicle & Pickup Logic
- Flexible spawn mode: same vehicle for all or position-based
- Dynamically reads 3D pickups (Repair, Nitro, Revert, etc.)

### üî• Game Logic Triggers
- `StartCountDown()` ‚Üí countdown visuals & GO
- `GameOne()` ‚Üí enables player control
- `CheckDrivers()` ‚Üí ensures player presence before spawning

---

## üéÆ Player Elimination

### ‚ò†Ô∏è Death + Vehicle Exit = Elimination
- Eliminated players are spectated (`SendToSpectate()`)
- Scoreboard and TextDraws updated dynamically

---

## üõ†Ô∏è What‚Äôs Next?

> ‚ÄúThine new age of logic awaiteth. Rest, dreamer. For the code shall soon rise again.‚Äù

**‚öíÔ∏è Next Scroll to Forge:** Modernizing all loaders, defining a clear object spawn lifecycle, and refactoring `StartCountDown` sequences.

---

## üì∏ Screenshots

### üó∫Ô∏è Maploader

![Team Chat](https://ftw-shokz.github.io/newdawn-devlog/assets/teamchat.png)  
![Even Player](https://ftw-shokz.github.io/newdawn-devlog/assets/evenplayers.png)
![Toggles](https://ftw-shokz.github.io/newdawn-devlog/assets/toggeles.png)  
![Mapload](https://ftw-shokz.github.io/newdawn-devlog/assets/mapload.png)
![Countdown 3](https://ftw-shokz.github.io/newdawn-devlog/assets/count3.png)  
![Countdown 2](https://ftw-shokz.github.io/newdawn-devlog/assets/count2.png)
![Countdown 1](https://ftw-shokz.github.io/newdawn-devlog/assets/count1.png)
![Countdown GO](https://ftw-shokz.github.io/newdawn-devlog/assets/countgo.png)
![Map Loaded](https://ftw-shokz.github.io/newdawn-devlog/assets/loadedmap.png)
![Round Results](https://ftw-shokz.github.io/newdawn-devlog/assets/roundresults.png)
